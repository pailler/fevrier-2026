<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test √âlimination Preloads</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background-color: #d4edda; border-color: #c3e6cb; }
        .error { background-color: #f8d7da; border-color: #f5c6cb; }
        .info { background-color: #d1ecf1; border-color: #bee5eb; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üß™ Test d'√âlimination des Preloads</h1>
    
    <div class="test-section info">
        <h3>üìã Instructions</h3>
        <p>1. Ouvrez la console du navigateur (F12)</p>
        <p>2. Rechargez cette page</p>
        <p>3. V√©rifiez les messages de suppression des preloads</p>
        <p>4. V√©rifiez qu'il n'y a plus d'avertissements de preload</p>
    </div>

    <div class="test-section">
        <h3>üîç V√©rification des Preloads</h3>
        <button onclick="checkPreloads()">V√©rifier les Preloads</button>
        <div id="preload-results"></div>
    </div>

    <div class="test-section">
        <h3>üìä Logs de Suppression</h3>
        <div id="suppression-logs"></div>
    </div>

    <script>
        // Capturer les logs de suppression
        const originalLog = console.log;
        const suppressionLogs = [];
        
        console.log = function(...args) {
            if (args[0] && args[0].includes('üóëÔ∏è')) {
                suppressionLogs.push(args.join(' '));
                updateSuppressionLogs();
            }
            originalLog.apply(console, args);
        };

        function updateSuppressionLogs() {
            const logsDiv = document.getElementById('suppression-logs');
            logsDiv.innerHTML = suppressionLogs.map(log => `<div style="margin: 5px 0; padding: 5px; background: #f8f9fa; border-radius: 3px;">${log}</div>`).join('');
        }

        function checkPreloads() {
            const resultsDiv = document.getElementById('preload-results');
            
            // V√©rifier les preloads de polices
            const fontPreloads = document.querySelectorAll('link[rel="preload"][as="font"]');
            const geistFonts = Array.from(fontPreloads).filter(link => 
                link.getAttribute('href') && link.getAttribute('href').includes('geist')
            );
            
            // V√©rifier les preloads d'images
            const imagePreloads = document.querySelectorAll('link[rel="preload"][as="image"]');
            const ogImages = Array.from(imagePreloads).filter(link => 
                link.getAttribute('href') && link.getAttribute('href').includes('og-image')
            );
            
            let html = '<h4>R√©sultats de la V√©rification:</h4>';
            
            if (fontPreloads.length === 0) {
                html += '<div class="success">‚úÖ Aucun preload de police trouv√©</div>';
            } else {
                html += `<div class="error">‚ùå ${fontPreloads.length} preload(s) de police trouv√©(s)</div>`;
                fontPreloads.forEach(link => {
                    html += `<div style="margin-left: 20px;">- ${link.getAttribute('href')}</div>`;
                });
            }
            
            if (geistFonts.length === 0) {
                html += '<div class="success">‚úÖ Aucun preload de police Geist trouv√©</div>';
            } else {
                html += `<div class="error">‚ùå ${geistFonts.length} preload(s) de police Geist trouv√©(s)</div>`;
                geistFonts.forEach(link => {
                    html += `<div style="margin-left: 20px;">- ${link.getAttribute('href')}</div>`;
                });
            }
            
            if (imagePreloads.length === 0) {
                html += '<div class="success">‚úÖ Aucun preload d\'image trouv√©</div>';
            } else {
                html += `<div class="error">‚ùå ${imagePreloads.length} preload(s) d\'image trouv√©(s)</div>`;
                imagePreloads.forEach(link => {
                    html += `<div style="margin-left: 20px;">- ${link.getAttribute('href')}</div>`;
                });
            }
            
            if (ogImages.length === 0) {
                html += '<div class="success">‚úÖ Aucun preload d\'image og-image trouv√©</div>';
            } else {
                html += `<div class="error">‚ùå ${ogImages.length} preload(s) d\'image og-image trouv√©(s)</div>`;
                ogImages.forEach(link => {
                    html += `<div style="margin-left: 20px;">- ${link.getAttribute('href')}</div>`;
                });
            }
            
            resultsDiv.innerHTML = html;
        }

        // V√©rifier automatiquement au chargement
        window.addEventListener('load', () => {
            setTimeout(checkPreloads, 1000);
        });
    </script>
</body>
</html>
