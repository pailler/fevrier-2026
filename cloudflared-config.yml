tunnel: b19084f4-e2d6-47f5-81c3-0972662e953c
credentials-file: /etc/cloudflared/credentials.json

ingress:
  # Application principale IAHome
  - hostname: iahome.fr
    service: http://192.168.1.150:3000
    originRequest:
      timeout: 900s  # 15 minutes timeout pour les uploads
      httpHostHeader: iahome.fr
  - hostname: www.iahome.fr
    service: http://192.168.1.150:3000
    originRequest:
      timeout: 900s  # 15 minutes timeout pour les uploads
      httpHostHeader: www.iahome.fr
  
  # LibreSpeed standalone (accès direct)
  - hostname: speed.iahome.fr
    service: http://192.168.1.150:8085
    originRequest:
      httpHostHeader: speed.iahome.fr
      timeout: 30s
      noTLSVerify: true
  
  # Services Whisper
  - hostname: whisper.iahome.fr
    service: http://192.168.1.150:3000
    originRequest:
      httpHostHeader: whisper.iahome.fr
      noTLSVerify: true
      disableChunkedEncoding: false
      maxChunkSize: 10485760  # 10MB chunks
      timeout: 900s  # 15 minutes timeout
      originServerName: whisper.iahome.fr
      # Headers pour augmenter la limite
      headers:
        X-Cloudflare-Max-Upload-Size: "1073741824"  # 1GB
        X-Cloudflare-Timeout: "900"
  - hostname: whisper-audio.iahome.fr
    service: http://whisper-api-prod:9000
    originRequest:
      httpHostHeader: whisper-audio.iahome.fr
      noTLSVerify: true
      disableChunkedEncoding: false
      maxChunkSize: 10485760  # 10MB chunks
      timeout: 900s  # 15 minutes timeout
  - hostname: whisper-video.iahome.fr
    service: http://whisper-video-prod:9000
    originRequest:
      httpHostHeader: whisper-video.iahome.fr
      noTLSVerify: true
      disableChunkedEncoding: false
      maxChunkSize: 52428800  # 50MB chunks pour vidéo
      timeout: 900s  # 15 minutes timeout
      originServerName: whisper-video.iahome.fr
      # Headers pour augmenter la limite
      headers:
        X-Cloudflare-Max-Upload-Size: "1073741824"  # 1GB
        X-Cloudflare-Timeout: "900"
  - hostname: whisper-ocr.iahome.fr
    service: http://whisper-ocr-prod:8080
    originRequest:
      httpHostHeader: whisper-ocr.iahome.fr
      noTLSVerify: true
      disableChunkedEncoding: false
      maxChunkSize: 10485760  # 10MB chunks
      timeout: 900s  # 15 minutes timeout
  
  # Services externes
  - hostname: pdf.iahome.fr
    service: http://192.168.1.150:8081
  - hostname: metube.iahome.fr
    service: http://192.168.1.150:8082
  - hostname: psitransfer.iahome.fr
    service: http://192.168.1.150:8084
  - hostname: stablediffusion.iahome.fr
    service: http://192.168.1.150:8085
  - hostname: ruinedfooocus.iahome.fr
    service: http://192.168.1.150:8087
  - hostname: comfyui.iahome.fr
    service: http://192.168.1.150:8088
  - hostname: sdnext.iahome.fr
    service: http://192.168.1.150:8089
  - hostname: invoke.iahome.fr
    service: http://192.168.1.150:8090
  - hostname: qrcodes.iahome.fr
    service: http://192.168.1.150:443
    originRequest:
      httpHostHeader: qrcodes.iahome.fr
      noTLSVerify: true
  - hostname: qrcode.iahome.fr
    service: http://192.168.1.150:8086
  
  # Dashboard Traefik (optionnel)
  - hostname: traefik.iahome.fr
    service: http://iahome-traefik:8080
  
  # Catch-all rule
  - service: http_status:404
