<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codes Home Assistant - Recherche de Cartes</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <!-- Banni√®re fusionn√©e IAHome + YouTube -->
        <section class="fused-banner">
            <!-- Partie gauche : IAHome -->
            <div class="fused-banner-part">
                <div class="banner-background">
                    <!-- √âl√©ments d√©coratifs anim√©s -->
                    <div class="decorative-circle circle-yellow"></div>
                    <div class="decorative-circle circle-green"></div>
                    <div class="decorative-icon icon-controller">üè†</div>
                </div>
                <div class="banner-brand-content">
                    <h1 class="banner-brand-title">IAHome</h1>
                    <p class="banner-brand-subtitle">Codes Home Assistant</p>
                </div>
            </div>

            <!-- Partie droite : Adamhome -->
            <div class="fused-banner-part">
                <div class="youtube-background">
                    <div class="youtube-decorative youtube-circle-1"></div>
                    <div class="youtube-decorative youtube-circle-2"></div>
                    <div class="youtube-decorative youtube-circle-3"></div>
                </div>
                <div class="banner-brand-content">
                    <p class="banner-partnership">En partenariat avec</p>
                    <h1 class="banner-brand-title">Adamhome</h1>
                    <p class="banner-brand-subtitle">@pailleradamhome</p>
                    <a href="https://www.youtube.com/@pailleradamhome" target="_blank" rel="noopener noreferrer" class="banner-brand-link">
                        <span class="banner-brand-link-icon">‚ñ∂Ô∏è</span>
                        <span>Voir la cha√Æne</span>
                    </a>
                </div>
            </div>
        </section>

        <!-- Section avec les informations principales (titre, progression, manuel) -->
        <section class="main-info-section">
            <div class="main-info-content">
                <h1 class="main-title">üè† Codes Home Assistant</h1>
                <p class="main-subtitle">Recherchez et copiez facilement les codes de cartes Lovelace</p>
                <p class="main-codes-count" id="totalCodesCount">Chargement...</p>
                
                <!-- Barre de progression -->
                <div class="progress-section">
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" id="progressBar">
                            <span class="progress-text" id="progressText">0%</span>
                        </div>
                    </div>
                    <p class="progress-info" id="progressInfo">0 codes disponibles</p>
                </div>
                
                <!-- Section Manuel -->
                <div class="manual-card-integrated">
                    <div class="manual-header-integrated">
                        <div class="manual-icon-integrated">üìñ</div>
                        <div class="manual-content-integrated">
                            <h2>Manuel Complet Home Assistant</h2>
                            <p>Guide complet d'installation, configuration et cr√©ation de dashboards professionnels</p>
                        </div>
                    </div>
                    <div class="manual-actions-integrated">
                        <a href="manuel-home-assistant.pdf" target="_blank" class="btn-manual-download-integrated" download>
                            <span class="btn-icon">üì•</span>
                            <span>T√©l√©charger le PDF</span>
                        </a>
                        <button class="btn-manual-view-integrated" id="viewManualBtn">
                            <span class="btn-icon">üëÅÔ∏è</span>
                            <span>Voir le manuel</span>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <div class="info-section">
            <div class="info-card">
                <div class="info-header">
                    <h2>Home Assistant, Qu'est-ce que c'est ? (d√©plie chaque partie)</h2>
                    <button class="btn-toggle-info" id="toggleInfo" aria-label="Masquer/Afficher les explications">
                        <span class="toggle-icon">‚ñº</span>
                    </button>
                </div>
                <div class="info-content" id="infoContent">
                    <div class="info-item">
                        <div class="info-item-header">
                            <h3>üé¥ Cartes Lovelace</h3>
                            <button class="btn-toggle-item" data-item="cartes" aria-label="Plier/D√©plier">
                                <span class="toggle-icon-item">‚ñ≤</span>
                            </button>
                        </div>
                        <div class="info-item-content collapsed" id="infoItem-cartes">
                            <p>Les cartes Lovelace sont les √©l√©ments visuels de votre interface Home Assistant. Elles permettent d'afficher et de contr√¥ler vos entit√©s (lumi√®res, capteurs, interrupteurs, etc.) de mani√®re √©l√©gante et personnalis√©e.</p>
                            <p><strong>Comment les utiliser :</strong></p>
                            <ol>
                                <li>Copiez le code YAML de la carte qui vous int√©resse</li>
                                <li>Dans Home Assistant, allez dans <strong>Param√®tres</strong> ‚Üí <strong>Tableaux de bord</strong> ‚Üí <strong>Lovelace</strong></li>
                                <li>Cliquez sur les <strong>3 points</strong> (‚ãÆ) en haut √† droite ‚Üí <strong>Modifier le tableau de bord</strong></li>
                                <li>Cliquez sur <strong>+ Ajouter une carte</strong> ‚Üí <strong>Code √©diteur</strong></li>
                                <li>Collez le code YAML et adaptez les noms d'entit√©s (ex: <code>light.salon</code> ‚Üí <code>light.votre_lumiere</code>)</li>
                                <li>Cliquez sur <strong>Sauvegarder</strong></li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-item-header">
                            <h3>üîß Templates</h3>
                            <button class="btn-toggle-item" data-item="templates" aria-label="Plier/D√©plier">
                                <span class="toggle-icon-item">‚ñ≤</span>
                            </button>
                        </div>
                        <div class="info-item-content collapsed" id="infoItem-templates">
                            <p>Les templates sont des capteurs ou entit√©s calcul√©s dynamiquement √† partir d'autres entit√©s. Ils permettent de cr√©er des donn√©es personnalis√©es, des calculs, ou des conditions complexes.</p>
                            <p><strong>Comment les utiliser :</strong></p>
                            <ol>
                                <li>Copiez le code template (section <strong>Templates & Automations</strong>)</li>
                                <li>Dans Home Assistant, allez dans <strong>Param√®tres</strong> ‚Üí <strong>Appareils et services</strong> ‚Üí <strong>Helpers</strong></li>
                                <li>Ou √©ditez directement le fichier <code>configuration.yaml</code> dans le dossier <code>config</code></li>
                                <li>Ajoutez le code dans la section <code>template:</code></li>
                                <li>Red√©marrez Home Assistant ou rechargez les templates via <strong>Param√®tres</strong> ‚Üí <strong>Appareils et services</strong> ‚Üí <strong>Template</strong> ‚Üí <strong>Recharger</strong></li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-item-header">
                            <h3>‚öôÔ∏è Automatisations</h3>
                            <button class="btn-toggle-item" data-item="automatisations" aria-label="Plier/D√©plier">
                                <span class="toggle-icon-item">‚ñ≤</span>
                            </button>
                        </div>
                        <div class="info-item-content collapsed" id="infoItem-automatisations">
                            <p>Les automatisations permettent d'automatiser des actions en fonction de conditions (ex: allumer la lumi√®re quand il fait nuit, envoyer une notification si une porte s'ouvre, etc.).</p>
                            <p><strong>Comment les utiliser :</strong></p>
                            <ol>
                                <li>Copiez le code d'automation (section <strong>Templates & Automations</strong>)</li>
                                <li>Dans Home Assistant, allez dans <strong>Param√®tres</strong> ‚Üí <strong>Automatisations et sc√®nes</strong> ‚Üí <strong>Automatisations</strong></li>
                                <li>Cliquez sur <strong>+ Cr√©er une automatisation</strong> ‚Üí <strong>Cr√©er une nouvelle automatisation</strong></li>
                                <li>Cliquez sur les <strong>3 points</strong> (‚ãÆ) ‚Üí <strong>Modifier en YAML</strong></li>
                                <li>Collez le code YAML et adaptez les entit√©s selon vos besoins</li>
                                <li>Cliquez sur <strong>Sauvegarder</strong></li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="info-item">
                        <div class="info-item-header">
                            <h3>üîå Int√©grations</h3>
                            <button class="btn-toggle-item" data-item="integrations" aria-label="Plier/D√©plier">
                                <span class="toggle-icon-item">‚ñ≤</span>
                            </button>
                        </div>
                        <div class="info-item-content collapsed" id="infoItem-integrations">
                            <p>Les int√©grations permettent de connecter Home Assistant √† des appareils, services et plateformes externes (cam√©ras, capteurs, assistants vocaux, services m√©t√©o, etc.). Elles √©tendent les capacit√©s de votre installation Home Assistant.</p>
                            <p><strong>Comment les utiliser :</strong></p>
                            <ol>
                                <li>Dans Home Assistant, allez dans <strong>Param√®tres</strong> ‚Üí <strong>Appareils et services</strong></li>
                                <li>Cliquez sur <strong>+ Ajouter une int√©gration</strong> en bas √† droite</li>
                                <li>Recherchez l'int√©gration souhait√©e dans la liste ou utilisez la barre de recherche</li>
                                <li>Suivez les instructions de configuration (saisie d'identifiants, autorisations, etc.)</li>
                                <li>Une fois configur√©e, l'int√©gration appara√Ætra dans <strong>Appareils et services</strong> avec ses entit√©s</li>
                                <li>Vous pourrez ensuite utiliser ces entit√©s dans vos cartes Lovelace, templates et automatisations</li>
                            </ol>
                            <p><strong>Astuce :</strong> Certaines int√©grations n√©cessitent une configuration via le fichier <code>configuration.yaml</code>. Consultez la documentation officielle de Home Assistant pour les d√©tails sp√©cifiques √† chaque int√©gration.</p>
                        </div>
                    </div>
                </div>
                </div>
            </div>
        </div>

        <div class="search-section">
            <div class="search-bar">
                <input 
                    type="text" 
                    id="searchInput" 
                    placeholder="Rechercher un code (ex: banner, button, m√©t√©o, slider...)"
                    autocomplete="off"
                >
                <span class="search-icon">üîç</span>
            </div>

            <div class="filters">
                <div class="filter-group">
                    <label>Cat√©gories :</label>
                    <div class="category-filters" id="categoryFilters"></div>
                </div>
                <div class="filter-group">
                    <label>Tags actifs :</label>
                    <div class="active-tags" id="activeTags"></div>
                </div>
            </div>
        </div>

        <div class="results-section">
            <div class="results-header">
                <span id="resultsCount">0 codes trouv√©s</span>
                <button id="clearFilters" class="btn-clear">Effacer les filtres</button>
            </div>

            <div class="codes-grid" id="codesGrid">
                <!-- Les codes seront inject√©s ici -->
            </div>

            <div class="no-results" id="noResults" style="display: none;">
                <p>üòî Aucun code trouv√©</p>
                <p>Essayez de modifier vos crit√®res de recherche</p>
            </div>
        </div>

    </div>

    <!-- Modal pour afficher les explications de termes -->
    <div class="modal" id="termModal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h2 id="termModalTitle">Explication</h2>
                <button class="modal-close" id="termModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div id="termModalContent"></div>
            </div>
        </div>
    </div>

    <!-- Modal pour afficher le manuel PDF -->
    <div class="modal" id="manualModal">
        <div class="modal-content modal-large">
            <div class="modal-header">
                <h2>Manuel Complet Home Assistant</h2>
                <button class="modal-close" id="manualModalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="pdf-viewer-container">
                    <iframe id="pdfViewer" src="manuel-home-assistant.pdf" type="application/pdf" frameborder="0"></iframe>
                </div>
                <div class="pdf-actions">
                    <a href="manuel-home-assistant.pdf" download class="btn-download-pdf">
                        <span>üì• T√©l√©charger le PDF</span>
                    </a>
                </div>
                <div class="manual-external-links" id="manualExternalLinks">
                    <h3>Liens utiles du manuel</h3>
                    <div class="external-links-grid" id="externalLinksGrid">
                        <!-- Les liens seront inject√©s dynamiquement par JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal pour afficher le code complet -->
    <div class="modal" id="codeModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modalTitle">Code</h2>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body">
                <div class="code-description" id="modalDescription"></div>
                <div class="code-tags" id="modalTags"></div>
                <div class="code-source-link" id="codeSourceLink" style="display: none;">
                    <a id="sourceLink" href="#" target="_blank" rel="noopener noreferrer">
                        üîó Autres codes de m√™me type
                    </a>
                </div>
                <div class="code-screenshot" id="modalScreenshot" style="display: none;">
                    <img id="modalScreenshotImg" src="" alt="Capture d'√©cran" loading="lazy">
                </div>
                
                <div class="code-block">
                    <div class="code-header">
                        <span>Code YAML</span>
                        <button class="btn-copy" id="copyCodeBtn" data-code="">
                            üìã Copier
                        </button>
                    </div>
                    <pre id="modalCode"><code></code></pre>
                </div>
                <div class="copy-success" id="copySuccess">‚úì Code copi√© !</div>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>

