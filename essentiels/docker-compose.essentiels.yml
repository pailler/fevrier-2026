version: '3.8'

services:
  # MeTube - Téléchargement de vidéos YouTube
  metube:
    image: alexta69/metube:latest
    container_name: metube
    restart: unless-stopped
    ports:
      - "8081:8081"
    volumes:
      - ../metube-downloads:/downloads
    networks:
      - essentiels-network

  # Stirling PDF - Gestionnaire PDF avancé
  stirling-pdf:
    image: frooodle/s-pdf:latest
    container_name: stirling-pdf
    restart: unless-stopped
    ports:
      - "8082:8080"
    volumes:
      - ../pdf-uploads:/configs/volume/tmp
      - ../pdf-temp:/configs/volume/temp
    networks:
      - essentiels-network

  # Librespeed - Test de vitesse internet sécurisé
  librespeed-secure:
    image: adolfintel/speedtest:latest
    container_name: librespeed-secure
    restart: unless-stopped
    ports:
      - "8083:80"
    environment:
      - ENABLE_IDLE=false
      - PASSWORD=iahome2024
    networks:
      - essentiels-network

  # PsiTransfer - Transfert de fichiers sécurisé
  psitransfer:
    image: psitrax/psitransfer:latest
    container_name: psitransfer
    restart: unless-stopped
    ports:
      - "8084:3000"
    environment:
      - PSITRANSFER_ADMIN_EMAIL=admin@iahome.fr
      - PSITRANSFER_SITE_NAME=IAHome Transfer
    volumes:
      - ./psitransfer-data:/var/lib/psitransfer
    networks:
      - essentiels-network

  # QR Codes - Générateur de QR codes statiques
  qrcodes:
    build:
      context: ./qrcodes
      dockerfile: Dockerfile
    container_name: qrcodes
    restart: unless-stopped
    ports:
      - "7005:7005"
    environment:
      - FLASK_ENV=production
      - IAHOME_JWT_SECRET=qr-code-secret-key-change-in-production
      - IAHOME_API_URL=http://localhost:3000
    volumes:
      - ./qrcodes/qr-codes:/app/qr_codes
      - ./qrcodes/logs:/app/logs
    networks:
      - essentiels-network

networks:
  essentiels-network:
    driver: bridge
